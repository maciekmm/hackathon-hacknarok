webpackJsonp([1],{101:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-content",{attrs:{"pa-0":""}},[n("v-container",{attrs:{"fill-height":"","fill-width":"","pa-0":"",fluid:""}},[n("transition",{attrs:{name:"fade"}},[n("router-view",{key:t.$route.fullPath})],1),t._v(" "),this.isLoggedIn()?n("v-btn",{staticClass:"center-button",attrs:{small:"",top:"",fab:"",right:"",fixed:""},on:{click:t.logout}},[n("v-icon",{attrs:{dark:""}},[t._v("exit_to_app")])],1):t._e()],1)],1)],1)},r=[],s={render:a,staticRenderFns:r};e.a=s},102:function(t,e,n){"use strict";var a=n(20),r=n(103),s=n(56),i=n(58),o=(n.n(i),n(106)),l=n(242),c=n.n(l),u=n(243),d=n(246),f=n(249),v=n.n(f),m=n(251);a.a.use(v.a,{name:"v-touch"}),a.a.use(c.a,{theme:{primary:"#00A99D",accent:"#FF6619",secondary:"#494949",secondaryText:"#8E8E8E"}}),a.a.use(r.a),e.a=new r.a({routes:[{path:"/",name:"Map",component:o.a},{path:"/event",name:"EventListItem",component:s.a},{path:"/room/:roomId",name:"Room",component:m.a},{path:"/login",name:"Login",component:u.a},{path:"/register",name:"Register",component:d.a}]})},104:function(t,e){},105:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",{staticClass:"event-card",attrs:{xs12:"",sm5:"",md3:"","my-3":"","mx-2":""}},[n("v-card",{staticClass:"max-height",attrs:{"px-2":"",height:"100%"}},[n("v-card-title",{staticClass:"px-0 height-half",attrs:{"primary-title":""}},[n("v-flex",{attrs:{xs4:""}},[n("p",{staticClass:"orange--text time"},[t._v("\n        "+t._s(new Date(this.event.start).toTimeString().substr(0,5))+"\n      ")])]),t._v(" "),n("v-flex",{attrs:{xs8:""}},[n("div",{staticClass:"card-header rounded"},[n("div",{staticClass:"no-margin"},[n("span",{staticClass:"black--text"},[t._v(t._s(this.event.caption))]),t._v(" "),n("br"),t._v(" "),this.event.description?n("span",{staticClass:"height-half secondaryText--text"},[t._v(t._s(this.event.description))]):t._e()])])])],1),t._v(" "),n("v-card-text",{staticClass:"px-0 no-margin",staticStyle:{"background-color":"#f9f9f9"}},[n("v-layout",{attrs:{wrap:"",fluid:""}},[n("v-flex",{attrs:{xs8:""}},[n("v-layout",[n("v-flex",[n("span",{staticClass:"primary--text distance"},[t._v("\n                "+t._s(t.distanceInKmBetweenEarthCoordinates(this.event.lat,this.event.lon,50,20))+" KM\n              ")])]),t._v(" "),n("v-flex",[n("span",[n("v-icon",[t._v("group")]),t._v("\n          "+t._s(this.event.members.length)),this.event.limit?n("span",[t._v("/"+t._s(this.event.limit))]):t._e(),t._v(" os√≥b\n        ")],1)])],1)],1),t._v(" "),n("v-flex",{attrs:{"mx-2":""}},[n("v-btn",{attrs:{block:"",color:"primary",round:""},on:{click:function(e){e.stopPropagation(),t.joinRoom(t.event.pk)}}},[t._v("\n            "+t._s(t.joinText)+"\n          ")])],1)],1)],1)],1)],1)},r=[],s={render:a,staticRenderFns:r};e.a=s},106:function(t,e,n){"use strict";function a(t){n(107)}var r=n(59),s=n(241),i=n(0),o=a,l=i(r.a,s.a,!1,o,null,null);e.a=l.exports},107:function(t,e){},222:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(83),r=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);var i=n(223),o=n(0),l=o(r.a,i.a,!1,null,null,null);e.default=l.exports},223:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"flyaway"},[t._t("default")],2)])},r=[],s={render:a,staticRenderFns:r};e.a=s},224:function(t,e,n){"use strict";function a(t){n(225)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(84),s=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);var o=n(227),l=n(0),c=a,u=l(s.a,o.a,!1,c,null,null);e.default=u.exports},225:function(t,e){},227:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-map-container"},[n("div",{ref:"vue-map",staticClass:"vue-map"}),t._v(" "),n("div",{staticClass:"vue-map-hidden"},[t._t("default")],2),t._v(" "),t._t("visible")],2)},r=[],s={render:a,staticRenderFns:r};e.a=s},228:function(t,e,n){"use strict";function a(t){n(229)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(86),s=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);var o=n(230),l=n(0),c=a,u=l(s.a,o.a,!1,c,null,null);e.default=u.exports},229:function(t,e){},230:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-street-view-pano-container"},[n("div",{ref:"vue-street-view-pano",staticClass:"vue-street-view-pano"}),t._v(" "),t._t("default")],2)},r=[],s={render:a,staticRenderFns:r};e.a=s},231:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(87),r=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);var i=n(232),o=n(0),l=o(r.a,i.a,!1,null,null,null);e.default=l.exports},232:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",[n("span",{domProps:{textContent:t._s(t.label)}}),t._v(" "),n("input",{ref:"input",class:t.className,attrs:{type:"text",placeholder:t.placeholder}})])},r=[],s={render:a,staticRenderFns:r};e.a=s},233:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(89),r=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);var i=n(237),o=n(0),l=o(r.a,i.a,!1,null,null,null);e.default=l.exports},237:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{ref:"input",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.value}})},r=[],s={render:a,staticRenderFns:r};e.a=s},238:function(t,e,n){"use strict";function a(t){n(239)}var r=n(90),s=n(240),i=n(0),o=a,l=i(r.a,s.a,!1,o,null,null);e.a=l.exports},239:function(t,e){},240:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"swipe mx-auto",attrs:{id:"swipe-container","fill-width":"","grid-list-md":"","text-xs-center":""},on:{swipeup:t.toggle}},[n("v-touch",{on:{swipeup:t.toggle,swipedown:t.toggle}},[n("div",{staticClass:"button-wrapper"},[n("v-btn",{staticClass:"trigger-button",staticStyle:{display:"inline-block",width:"100%"},attrs:{color:"primary",depressed:""},on:{click:t.toggle}},[t.collapsed?n("v-icon",[t._v("keyboard_arrow_up")]):n("v-icon",[t._v("keyboard_arrow_down")])],1)],1)]),t._v(" "),n("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[n("v-layout",{attrs:{row:"",wrap:"","align-content-space-around":"","justify-space-around":""}},t._l(t.store.rooms,function(e){return n("eventListItem",{key:e.pk,attrs:{color:"primary",event:e},nativeOn:{click:function(n){t.goToRoom(e.pk)}}})}))],1)],1)])},r=[],s={render:a,staticRenderFns:r};e.a=s},241:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"map-wrapper"},[n("v-toolbar",{staticClass:"gradient-background",attrs:{fixed:"",flat:"",height:"100"}},[n("v-container",{staticClass:"pointer-events",attrs:{"align-center":"","grid-list-lg":"","text-xs-center":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{sm12:"",md2:"","text-xs-center":""}},[n("router-link",{staticClass:"link-disabled",attrs:{to:"/"}},[n("v-toolbar-title",{staticClass:"white--text display-1",staticStyle:{"font-weight":"bold"}},[t._v("WeLearn")])],1)],1),t._v(" "),n("v-flex",{attrs:{sm12:"",md8:""}},[n("v-text-field",{staticClass:"mx-auto search-bar",attrs:{"prepend-icon":"search","hide-details":"",solo:"",light:"","single-line":""}})],1),t._v(" "),n("v-flex",{attrs:{sm12:"",md2:""}},[n("v-select",{attrs:{label:"Category",solo:"",clearable:"","close-on-click":!0,items:this.store.categories,"item-text":"caption","item-key":"pk","single-line":"","hide-details":""}})],1)],1)],1)],1),t._v(" "),n("gmap-map",{attrs:{center:t.center,position:t.center,options:{disableDefaultUI:!0},zoom:13}},[t._l(this.store.rooms,function(t){return n("gmap-marker",{attrs:{position:{lat:parseFloat(t.lat),lng:parseFloat(t.lon)}}})}),t._v(" "),n("gmap-info-window",{attrs:{position:{lat:50.38,lng:20.8}}},[t._v("\n      Hello world!\n    ")])],2),t._v(" "),n("v-btn",{staticClass:"center-button",attrs:{bottom:"",fab:"",right:"",fixed:""},on:{click:this.getLocationAndCenter}},[n("v-icon",{attrs:{dark:""}},[t._v(t._s(this.icon))])],1),t._v(" "),n("v-btn",{staticClass:"center-button",staticStyle:{"margin-bottom":"130px"},attrs:{bottom:"",fab:"",right:"",fixed:""},on:{click:function(t){}}},[n("v-icon",{attrs:{dark:""}},[t._v("add")])],1),t._v(" "),n("offers-list")],1)},r=[],s={render:a,staticRenderFns:r};e.a=s},243:function(t,e,n){"use strict";function a(t){n(244)}var r=n(91),s=n(245),i=n(0),o=a,l=i(r.a,s.a,!1,o,null,null);e.a=l.exports},244:function(t,e){},245:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"full-width"},[n("v-toolbar",{staticClass:"no-bg",attrs:{flat:"",height:"100"}},[n("v-container",{attrs:{"align-center":"","grid-list-lg":"","text-xs-center":""}},[n("v-toolbar-title",{staticClass:"white--text display-3",staticStyle:{"font-weight":"bold"}},[t._v("WeLearn")])],1)],1),t._v(" "),n("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",md10:"","offset-md2":"",lg6:"","offset-lg3":""}},[n("v-card",[n("v-card-text",[n("v-form",{ref:"form",staticStyle:{width:"100%"}},[n("v-container",{attrs:{"fill-height":"",fluid:""}},[n("v-layout",{attrs:{"fill-height":"",row:"",wrap:""}},[n("v-flex",{attrs:{"offset-md1":"",xs12:"",md10:""}},[n("v-text-field",{attrs:{label:"Username",rules:t.requiredRule,required:""},model:{value:t.credentials.username,callback:function(e){t.$set(t.credentials,"username",e)},expression:"credentials.username"}})],1),t._v(" "),n("v-flex",{attrs:{"offset-md1":"",xs12:"",md10:""}},[n("v-text-field",{attrs:{label:"Password",type:"password",rules:t.requiredRule,required:""},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}})],1),t._v(" "),n("v-flex",{attrs:{"offset-md1":"",xs12:"",md10:""}},[n("v-btn",{attrs:{color:"primary",block:"",round:"",depressed:"",type:"submit"},on:{click:t.login}},[t._v("Log in")])],1),t._v(" "),n("v-flex",{attrs:{"offset-md1":"",xs12:"",md10:""}},[t._v("\n                      Don't have an account? "),n("router-link",{attrs:{to:"/register"}},[t._v("Sign up")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},r=[],s={render:a,staticRenderFns:r};e.a=s},246:function(t,e,n){"use strict";function a(t){n(247)}var r=n(92),s=n(248),i=n(0),o=a,l=i(r.a,s.a,!1,o,null,null);e.a=l.exports},247:function(t,e){},248:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"full-width"},[n("v-toolbar",{staticClass:"no-bg",attrs:{flat:"",height:"100"}},[n("v-container",{staticClass:"no-bg",attrs:{"text-xs-center":""}},[n("v-toolbar-title",{staticClass:"white--text display-3",staticStyle:{"font-weight":"bold"}},[t._v("WeLearn")])],1)],1),t._v(" "),n("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",md10:"","offset-md1":"",lg6:"","offset-lg3":""}},[n("v-card",[n("v-card-text",[n("v-form",{ref:"form",staticStyle:{width:"100%"}},[n("v-container",{attrs:{"fill-height":"",fluid:""}},[n("v-layout",{attrs:{"grid-list-xs":"",row:"",wrap:""}},[n("v-flex",{attrs:{"offset-md1":"",md5:"",xs6:""}},[n("v-text-field",{attrs:{label:"First name"},model:{value:t.credentials.first_name,callback:function(e){t.$set(t.credentials,"first_name",e)},expression:"credentials.first_name"}})],1),t._v(" "),n("v-flex",{attrs:{xs6:"",md5:""}},[n("v-text-field",{attrs:{label:"Last name"},model:{value:t.credentials.last_name,callback:function(e){t.$set(t.credentials,"last_name",e)},expression:"credentials.last_name"}})],1),t._v(" "),n("v-flex",{attrs:{"offset-md1":"",xs12:"",md10:""}},[n("v-text-field",{attrs:{label:"E-mail",rules:t.emailRules,required:""},model:{value:t.credentials.email,callback:function(e){t.$set(t.credentials,"email",e)},expression:"credentials.email"}})],1),t._v(" "),n("v-flex",{attrs:{"offset-md1":"",xs12:"",md10:""}},[n("v-text-field",{attrs:{label:"Username",rules:t.requiredRule,required:""},model:{value:t.credentials.username,callback:function(e){t.$set(t.credentials,"username",e)},expression:"credentials.username"}})],1),t._v(" "),n("v-flex",{attrs:{"offset-md1":"",xs12:"",md10:""}},[n("v-text-field",{attrs:{label:"Password",type:"password",rules:t.requiredRule,required:""},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}})],1),t._v(" "),n("v-flex",{attrs:{"offset-md1":"",xs12:"",md10:""}},[n("v-btn",{attrs:{color:"primary",block:"",round:"",depressed:"",type:"submit"},on:{click:t.login}},[t._v("Sign up")])],1),t._v(" "),n("v-flex",{attrs:{"offset-md1":"",xs12:"",md10:""}},[t._v("\n                      Already have an account? "),n("router-link",{attrs:{to:"/login"}},[t._v("Sign in")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},r=[],s={render:a,staticRenderFns:r};e.a=s},251:function(t,e,n){"use strict";function a(t){n(252)}var r=n(93),s=n(253),i=n(0),o=a,l=i(r.a,s.a,!1,o,"data-v-d95c2650",null);e.a=l.exports},252:function(t,e){},253:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",[t._v("Room view")]),t._v(" "),n("p",[t._v(t._s(t.roomId))]),t._v(" "),n("p",[t._v(t._s(t.room.caption))])])},r=[],s={render:a,staticRenderFns:r};e.a=s},255:function(t,e){},256:function(t,e,n){"use strict";function a(t){Object(r.a)(t)}e.a=a;var r=n(257)},257:function(t,e,n){"use strict";function a(t){t.beforeEach(function(e,n,a){var r=window.localStorage.getItem("token");if(r&&("login"===e.name||e.name),console.log(e),!r&&"Login"!==e.name&&"Register"!==e.name)return void t.push("/login");a()})}e.a=a},258:function(t,e,n){"use strict";var a=(n(9),n(20)),r=n(259),s=n.n(r),i={bus:new a.a,user:{token:function(){return window.localStorage.getItem("token")},getUser:function(){return window.localStorage.getItem("token")?s()(window.localStorage.getItem("token")).User:null},getAuthorizationHeader:function(){return{Authorization:"JWT "+token()}},logout:function(t){window.localStorage.removeItem("token"),t&&t.push("/login")}},data:{rooms:[],categories:[]}};e.a={store:i,install:function(t,e){t.prototype.$store=i}}},55:function(t,e,n){"use strict";n(9);e.a={name:"app",methods:{isLoggedIn:function(){return this.$store.user.token()&&"Login"!==this.$route.name&&"Register"!==this.$route.name},logout:function(){this.$store.user.logout(this.$router)}}}},56:function(t,e,n){"use strict";function a(t){n(104)}var r=n(57),s=n(105),i=n(0),o=a,l=i(r.a,s.a,!1,o,"data-v-279c8364",null);e.a=l.exports},57:function(t,e,n){"use strict";var a=n(9);e.a={name:"EventListItem",computed:{joined:function(){var t=window.localStorage.getItem("userPk");return-1!==this.room.members.indexOf(t)},room:function(){var t=this;return this.$store.data.rooms.filter(function(e){return e.pk===t.event.pk})[0]},joinText:function(){return this.joined?"Wyjd≈∫":"Do≈ÇƒÖcz"}},props:["event"],methods:{joinRoom:function(t){var e=this.room,n=window.localStorage.getItem("userPk");if(this.joined){var r=e.members.indexOf(n);r>-1&&e.members.splice(r,1)}else e.members=e.members.concat(n);this.$http.put(a.a+"rooms/"+e.pk,e).then(function(t){return console.log(t)}).catch(function(t){return console.log(t)})},distanceInKmBetweenEarthCoordinates:function(t,e,n,a){var r=(n-t)*Math.PI/180,s=(a-e)*Math.PI/180;t=t*Math.PI/180,n=n*Math.PI/180;var i=Math.sin(r/2)*Math.sin(r/2)+Math.sin(s/2)*Math.sin(s/2)*Math.cos(t)*Math.cos(n),o=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return parseInt(6371*o)}}}},58:function(t,e){},59:function(t,e,n){"use strict";var a=n(108),r=(n.n(a),n(20)),s=n(238),i=n(9);r.a.use(a,{load:{key:"AIzaSyBr8wwgdwKJadT6Tdwc2D5drd9KIElpZVw"}}),e.a={name:"MapView",data:function(){return{center:{lat:10,lng:10},icon:"gps_not_fixed",error:"",store:this.$store.data}},mounted:function(){var t=this;this.$http.get(i.a+"categories/").then(function(e){t.store.categories=e.body},function(e){t.error=e.err}),this.$http.get(i.a+"rooms/").then(function(e){t.$store.data.rooms=e.body},function(e){t.error=e.err}),this.getLocationAndCenter()},methods:{getLocationAndCenter:function(){var t=this;this.icon="gps_not_fixed",navigator.geolocation?navigator.geolocation.getCurrentPosition(this.centerMap,function(e){t.icon="gps_off"}):this.icon="gps_off"},addRoom:function(){},centerMap:function(t){this.center={lat:t.coords.latitude+Math.random()/1e3,lng:t.coords.longitude+Math.random()/1e3},this.icon="gps_fixed"}},components:{OffersList:s.a}}},9:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var a="https://welearn.math.party/"},90:function(t,e,n){"use strict";var a=n(56);e.a={name:"OffersList",mounted:function(){this.toggle()},data:function(){return{store:this.$store.data,collapsed:!1}},methods:{toggle:function(){this.collapsed=!this.collapsed;var t=document.getElementById("swipe-container");this.collapsed?(t.classList.remove("swipe-active"),t.scrollTo(0,0)):t.classList.add("swipe-active")},goToRoom:function(t){this.$router.push({name:"Room",params:{roomId:t}})}},components:{EventListItem:a.a}}},91:function(t,e,n){"use strict";var a=n(9);e.a={data:function(){return{credentials:{username:"",password:""},requiredRule:[function(t){return!!t||"This field is required"}]}},methods:{login:function(){var t=this;this.$refs.form.validate()&&this.$http.post(a.a+"api-token-auth/",this.credentials).then(function(e){window.localStorage.setItem("token",e.data.token),window.localStorage.setItem("userPk",e.data.pk),t.$router.push("/")}).catch(function(t){console.log(t)})}}}},92:function(t,e,n){"use strict";var a=n(9);e.a={data:function(){return{credentials:{first_name:"",last_name:"",email:"",username:"",password:""},requiredRule:[function(t){return!!t||"This field is required"}],emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,5})+$/.test(t)||"E-mail must be valid"}],errors:[]}},methods:{login:function(){var t=this;this.$refs.form.validate()&&this.$http.post(a.a+"register/",this.credentials).then(function(e){t.$router.push("/login")}).catch(function(e){console.log(e),t.errors=e})}}}},93:function(t,e,n){"use strict";e.a={name:"Room",data:function(){var t=this;return{roomId:this.$route.params.roomId,room:this.$store.data.rooms.filter(function(e){return e.pk===t.roomId})}}}},94:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(20),r=n(98),s=n(102),i=n(254),o=n(256),l=n(258),c=n(9);a.a.config.productionTip=!1,a.a.use(i.a),a.a.use(l.a),Object(o.a)(s.a),a.a.http.interceptors.push(function(t,e){var n=window.localStorage.getItem("token");n&&t.headers.set("Authorization","JWT "+n),e(function(e){if(401===e.status)return a.a.http.post(c.a+"api-token-refresh/",{token:n}).then(function(e){return a.a.http(t).then(function(t){return t})}).catch(function(t){return console.log(t),s.a.push("login")})})}),new a.a({el:"#app",router:s.a,template:"<App/>",components:{App:r.a}})},98:function(t,e,n){"use strict";function a(t){n(99)}var r=n(55),s=n(101),i=n(0),o=a,l=i(r.a,s.a,!1,o,null,null);e.a=l.exports},99:function(t,e){}},[94]);
//# sourceMappingURL=app.6151a8a52fc99d63e936.js.map